--edit /etc/pihole/logrotate--
/var/log/pihole.log {
        su root root
        daily
        copytruncate
        rotate 5
        compress
        delaycompress
        notifempty
        nomail
}

/var/log/pihole-FTL.log {
        su root root
        daily
        copytruncate
        rotate 5
        compress
        delaycompress
        notifempty
        nomail
}

--make pihole user a sudoers--
sudo usermod -a -G sudo pihole

--give pihole user sudo right--
visudo
[...]
#includedir /etc/sudoers.d
pihole ALL=(ALL) NOPASSWD:/bin/gzip,/bin/cp,/bin/rm

--Create a home directory for user "pihole"--
cd /home
sudo mkdir pihole
sudo chown -R pihole:pihole pihole

--Edit /etc/passwd to log as pihole--
sudo vi /etc/passwd
[...]
pihole:x:999:995::/home/pihole:/bin/bash

--log as pihole--
su - pihole

--Create Log management script--
vi pihole_log_management.sh
#!/bin/bash

sudo gzip -9 /var/log/pihole.log.1 && sudo cp -p /var/log/pihole.log.1.gz /var/log/pihole/pihole.log.`date +"%Y-%m-%d"`.gz && sudo rm -f /var/log/pihole.log.1.gz && echo ok
-------------------------------
vi pihole_FTL_log_management.sh
#!/bin/bash

sudo gzip -9 /var/log/pihole-FTL.log.1 && sudo cp -p /var/log/pihole-FTL.log.1.gz /var/log/pihole/pihole-FTL.log.`date +"%Y-%m-%d"`.gz && sudo rm -f /var/log/pihole-FTL.log.1.gz && echo ok

--Edit pihole's crontab--
crontab -e
#Script for log management
0 9 * * * /home/pihole/pihole_log_management.sh  2>> /var/log/pihole/pihole_log_management_error.log
0 9 * * * /home/pihole/pihole_FTL_log_management.sh 2>> /var/log/pihole/pihole_FTL_log_management_error.log

#Log Suppression
30 9 * * * find /var/log/pihole/ -maxdepth 1 -not -path /var/log/pihole/ mtime +7 -exec sudo rm -f {} \;

--log as pi user--
su - pi

--Edit /etc/passwd--
sudo vi /etc/passwd
[...]
pihole:x:999:995::/home/pihole:/usr/sbin/nologin

